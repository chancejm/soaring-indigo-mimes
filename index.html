<!DOCTYPE html>

<head>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB"
        crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" media="screen" href="assets/css/style.css" />
    <script src="https://www.gstatic.com/firebasejs/5.1.0/firebase.js"></script>


</head>

<body>
    <div class="jumbotron">
        <h3>This is a basic Test for Input</h3>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-lg-4">
                <form>
                    <input id="userInput" type="text" placeholder="Character Name">
                    <button id="characterInput" class="btn btn-primary" type="submit">Submit</button>
                </form>
            </div>
        </div>

        <!-- begin button display area -->
        <div class="row" id="display-button-area">

        </div>
        <!-- end button display area -->

        <!-- begin teamup display area -->
        <div class="mt-4" id="display-teamup">
            <div class="card">
                <div class="card-header">
                    Your Chosen Teamup
                    <button type="button" class="btn btn-secondary btn-sm float-right" id="get-info" disabled>Get Info</button>
                </div>
                <div class="card-body">
                    <div class="row">
                        <!-- The images in here are placeholders. They will eventually be dynamically added later with a Velocity transition -->
                        <div class="col-6">
                            <img src="http://i.annihil.us/u/prod/marvel/i/mg/2/60/537bcaef0f6cf.jpg" class="img-fluid" id="display-image-1">
                            <p class="text-center" id="display-name-1">Wolverine</p>
                        </div>
                        <div class="col-6">
                            <img src="http://i.annihil.us/u/prod/marvel/i/mg/3/50/537ba56d31087.jpg" class="img-fluid" id="display-image-2">
                            <p class="text-center" id="display-name-2">Captain America</p>
                        </div>
                    </div>
                    <div id="display-teamup-info">
                        <p>First team up: 
                            <span id="display-teamup-issue"></span>
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <!-- end teamup display area -->
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="assets/js/app.js"></script>
    <script>
        
        var arrayCombinedIDs = [];
        var strCombinedIDs;
        
        $("#get-info").on("click", function (event) {
            
            
            // Empty current array
            arrayCombinedIDs = [];
            incrementer = 1;
            
            $(".active").each(function () {
                var numID = $(this).attr("id-number");
                var urlThumbnail;
                var strName;

                arrayCombinedIDs.push(numID);
                console.log(numID);
                urlThumbnail = getThumbnailByID(numID);
                strName = getNameByID(numID);
                $("#display-image-" + incrementer).attr("src", urlThumbnail);
                $("#display-name-" + incrementer).text(strName);
                incrementer++;
            });
            
            strCombinedIDs = arrayCombinedIDs.toString();
            console.log(strCombinedIDs);
            
            var teamupQueryURL = "https://gateway.marvel.com/v1/public/comics?format=comic&formatType=comic&noVariants=true&dateRange=1960-01-01%2C2018-06-21&sharedAppearances="+ strCombinedIDs +"&orderBy=focDate%2ConsaleDate&limit=1&ts=1&apikey=4287eee52c27f292e44137f86910da4a&hash=3f4394a993af3110f684ed8d0f8db35d";

            $.ajax({
                url: teamupQueryURL,
                method: "GET"
            }).then(function (response) {
                console.log(response);
                console.log(response.data.results["0"].title);
                $("#display-teamup-issue").text(response.data.results["0"].title);
            });
        });

    </script>
</body>

</html>